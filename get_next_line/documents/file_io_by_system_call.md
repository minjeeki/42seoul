# 시스템 호출(시스템 콜)을 이용한 파일 입출력

## 시스템 호출 (시스템 콜)

프로그램(사용자 프로세스)이 커널(Kernel)에 직접 서비스를 요청하는 것
(운영체제 커널에 의해 제공되는 서비스에 대한 프로그래밍 인터페이스)

* 주로 처리하는 작업

	* 파일 및 디렉터리, 네트워크 연결, 메모리 등과 같은 시스템 자원에 대한 접근 및 관리를 운영체제에 요청 => 하드웨어에 대한 접근을 추상화해 프로그램이 특정 하드웨어에 종속되지 않게 함

	* 다중 프로세스 및 스레드 간의 통신 및 동기화

* 프로그램에서 시스템 호출을 사용할 경우 사용자(User) 모드가 아닌 커널 모드로 실행됨

* C, C++ 등의 언어 뿐음 아니라 Java, Python 등의 언어에서도 간접적으로 사용할 수 있음

* 시스템 호출은 각 운영체제마다 독특하기에 특정 운영체제의 문서나 API 참조를 통해 사용법을 확인할 수 있음

* 시스템 호출을 사용할 경우의 장단점

	* 장점 : 시스템에 직접 접근하기에 개발자가 로우레벨(low-level)까지 제어할 수 있음

	* 단점 : 커널에 직접 접근하는 것이기에 시스템 호출을 남용할 경우 성능 손실이 일어날 수 있음

## 파일 및 디렉토리 관리(열기, 닫기, 읽기, 쓰기, 생성, 삭제)에 사용되는 시스템 호출 함수

### open()

: 파일을 열거나 새 파일을 생성해 파일 스크립터를 반환하는 시스템 호출 함수

* 함수 프로토 타입

	```C
	int open(const char *path, int flags, mode_t mode);
	```

* 인자

	* path : 열고자하는 파일의 경로

	* flags : 파일을 어덯게 열지에 대한 플래그 (읽기, 쓰기, 생성 등)

	* mode : 새로운 파일을 생성할 때 사용되는 권한 설정 (주로 파일 생성 시 사용)

* 반환값

	* 성공 시 : 파일 디스크립터 (파일을 나타내는 정수 값)

	* 실패 시 : -1 & errno 변수에 오류 코드가 설정됨

### close()

: 파일 디스크립터로 지정된 파일을 닫는 시스템 호출 함수

* 프로토 타입

	```C
	int close(int fd);
	```

* 인자

	* fd : 닫을 파일 디스크립터

* 반환값

	* 성공 : 0

	* 실패 : -1 반환 & errno 변수에 오류 코드 설정

### read()

: 파일에서 데이터를 읽어 버퍼를 저장하는 시스템 호출 함수

* 프로토 타입

	```C
	ssize_t read(int fd, void *buf, size_t count);
	```

* 인자

	* fd : 파일 디스크립터

	* buf : 데이터를 저장할 버퍼의 포인터

	* count : 읽을 바이트 수

* 반환값

	* 성공 : 실제로 읽은 바이트 수

	* 실패 : -1 반환 & errno 변수에 오류 코드 설정

### write()

: 버퍼에 있는 데이터를 파일에 쓰는 시스템 호출 함수

* 프로토 타입

	```C
	ssize_t write(int fd, void *buf, size_t count);
	```

* 인자

	* fd : 파일 디스크립터

	* buf : 데이터를 포함하는 버퍼의 포인터

	* count : 쓸 바이트 수

* 반환값

	* 성공 : 실제로 쓴 바이트 수

	* 실패 : -1 반환 & errno 변수에 오류 코드 설정

### lseek()

### mkdir()

### rmdir()

### unlink()

## 프로세스 관리(생성, 실행, 종료, 시그널 전송)에 사용되는 시스템 호출 함수

### fork() :

### exec() : 

### wait() :

### exit() : 

### kill() : 

## 메모리 관리 (할당 및 해제)에 사용되는 시스템 호출 함수

### brk() : 

### mmap() : 

### munmap() : 

## 프로세스 간 통신 및 동기화에 사용되는 시스템 호출 함수

### pipe() : 

### shmget() : 

### semop() : 

